---
title: 'Authorization Flow'
description: 'Allow your users to connect their SID account to your application'
---
## Overview
The OAuth2.0 authentication flow is a standard protocol for allowing users to connect their accounts from one application to another.
SID uses this protocol to securely give your application access to the user's SID account.
It involves the following steps:

1. **Authorization Link:** 
In your application, the user clicks a special authorization link which is specific to your application. 
They are taken to the SID dashboard to authenticate.

2. **Redirect:** 
After the user logs in and grants access permissions to your application, SID redirects them back to your application with an authorization code. 
They are redirected to a previously specified URI, such as `https://example.com/callback`. This URI is specific to your application, too.

3. **Tokens Issued:** 
Your application makes a POST request to SID's token endpoint with the authorization code,
client ID, and client secret, and receives an access token and refresh token in response.

Once you have the access token, you can use it to make requests to the SID API on behalf of the user.

## Client Credentials
Before you can initiate the authorization flow, you must register your application with SID to receive your [client credentials](/auth/credentials).
These credentials are used to identify your application when performing the authorization flow.

You will receive these credentials during our onboarding process. 
In the future, you will be able to register your application through the SID developer dashboard.

## Initiate Flow
The authorization flow is initiated by redirecting a user to an authorization URL, of the form 
```bash
https://me.sid.ai/api/auth/login?returnTo=...
``` 
Usually, this will happen through a button or link in your application, which could be located
in a settings page, or on the user's profile page.

The authorization URL is specific to your application, and is generated by SID. We will provide you with the URL during our onboarding process.

## Callback
The authorization URL will redirect the user to the SID dashboard, where they will be prompted to log in and grant access permissions to your application.
Once they have done so, they will be redirected back to your application with an authorization code. You will need to provide a callback URL to receive this code.

For example, if your application is hosted at `https://example.com`, you could specify a callback URL of `https://example.com/callback`. 
You should then handle incoming `POST` requests to this URL to receive the authorization code.
Continuing with the example, a possible callback would be a `POST` request to `https://example.com/callback?code=mycoolcode`.
The following code snippet shows an example a callback handler written in Next.js which extracts the authorization code.

```js
import { NextApiRequest, NextApiResponse } from 'next';

export default async function handler(req: NextApiRequest, res: NextApiResponse) {
  // get authorization code from query string
  let code = req.query.code;

  // ... do something with it
}

```
Of course, you can implement this in any language or framework you like.

## Token Exchange
Once you have the authorization code, you can exchange it for an access token and refresh token.
You can do this with a simple `POST` request to the SID token endpoint, with the authorization code, client ID, and client secret.
The below code snippet shows an example of how to do this in Node.js using the [axios](https://www.npmjs.com/package/axios) library.

```js
import axios from 'axios';

function tokenExchange(code: string) {
// construct data to send to SID
  const data = {
    grant_type: 'authorization_code',
    client_id: process.env.SID_CLIENT_ID,
    client_secret: process.env.SID_CLIENT_SECRET,
    redirect_uri: process.env.SID_REDIRECT_URI,
    code: code,
  };

  // send request to SID token endpoint
  const response = await axios.post('https://auth.sid.ai/oauth/token', data);

  // extract tokens from response
  const {
    access_token, 
    refresh_token, 
    scope, 
    expires_in,
    token_type, 
  } = response.data;

  // return tokens
  return {
    refreshToken: refresh_token,
    accessToken: access_token,
  }
}
```
Once you have the access token, you can use it to make requests to the SID API on behalf of the user.

<Info>
The access token is valid for 24 hours. After this time, you will need to [use the refresh token](/auth/tokens) to get a new access token.
</Info>

## Using the Refresh Token

<CardGroup cols={2}>
  <Card
    title="Access the API"
    icon="rocket"
    href="/build/query"
  >
    Use the access token to make your first request to the SID API
  </Card>
  <Card
    title="Token Types"
    icon="key"
    href="/auth/tokens"
  >
    Learn more about the different tokens and how to handle them correctly
  </Card>
</CardGroup>
